- name: Pull latest code (no build/restart)
  uses: appleboy/ssh-action@v1.2.0
  with:
    host: ${{ secrets.SSH_HOST }}
    username: ${{ secrets.SSH_USER }}
    key: ${{ secrets.SSH_PRIVATE_KEY || secrets.VPS_SSH_KEY }}
    port: ${{ secrets.SSH_PORT }}
    script: |
      set -euo pipefail
      APP_DIR="/opt/MSSQLJDBCTest"
      BRANCH="main"            # đổi nếu bạn dùng master/khác

      cd "$APP_DIR"            # THƯ MỤC NÀY PHẢI TỒN TẠI & ĐÃ CLONE TRƯỚC
      git fetch --all
      git reset --hard "origin/$BRANCH"
      git submodule update --init --recursive || true

      echo "Pulled latest commit:"
      git log -1 --oneline
